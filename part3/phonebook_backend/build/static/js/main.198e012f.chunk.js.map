{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","persons","handleDeletePerson","map","person","name","number","onClick","id","Notification","message","className","includes","baseUrl","axios","get","then","response","data","newObject","post","headers","put","delete","App","useState","setPersons","setNewName","setNewNumber","newFilter","setNewFilter","setMessage","useEffect","personService","initialPersons","console","log","event","target","regex","RegExp","filter","match","preventDefault","personObject","sameName","find","changedNumber","length","window","confirm","updatedPerson","setTimeout","catch","error","status","Number","returnedPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.198e012f.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({ value, onChange }) => {\r\n    return (\r\n        <>\r\n            filter shown with <input value={value} onChange={onChange} />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react';\r\n\r\nconst PersonForm = ({ addPerson, newName, handleNameChange, newNumber, handleNumberChange }) => {\r\n    return (\r\n        <>\r\n            <form onSubmit={addPerson}>\r\n                <div>\r\n                    name: <input value={newName} onChange={handleNameChange} />\r\n                </div>\r\n                <div>\r\n                    number: <input value={newNumber} onChange={handleNumberChange} />\r\n                </div>\r\n                <div>\r\n                    <button type=\"submit\">add</button>\r\n                </div>\r\n            </form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react';\r\n\r\nconst Persons = ({ persons, handleDeletePerson }) => {\r\n    return (\r\n        <>\r\n            <ul>\r\n                {persons.map(person =>\r\n                    <li key={person.id}>\r\n                        {person.name} {person.number} <button onClick={() => handleDeletePerson(person.name, person.id)}>delete</button>\r\n                    </li>\r\n                )}\r\n            </ul>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className={message.includes('failed') ? 'error' : 'success'}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject, {\r\n        data: null,\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    })\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport Notification from './components/Notification'\r\nimport personService from './services/persons'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [newFilter, setNewFilter] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        console.log('promise fulfilled')\r\n        setPersons(initialPersons)\r\n      })\r\n  }, [])\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    const sameName = persons.find(person => person.name === newName)\r\n    const changedNumber = { ...sameName, number: newNumber }\r\n    if (persons.filter(person => person.name === newName).length > 0) {\r\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n        personService\r\n          .update(sameName.id, changedNumber)\r\n          .then(updatedPerson => {\r\n            // console.log(`${updatedPerson.name}'s number updated to ${updatedPerson.number}`)\r\n            setPersons(persons.map(person => person.name === newName ? updatedPerson : person))\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setMessage(\r\n              `${updatedPerson.name}'s number updated to ${updatedPerson.number}`\r\n            )\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 3000)\r\n          })\r\n          .catch(function (error) {\r\n            if (error.response.status === Number('404')) {\r\n              setPersons(persons.filter(person => person.id !== changedNumber.id))\r\n              setNewName('')\r\n              setNewNumber('')\r\n              setMessage(\r\n                `failed: Information of ${changedNumber.name} has already been removed from server`\r\n              )\r\n              setTimeout(() => {\r\n                setMessage(null)\r\n              }, 3000)\r\n            } else if (error.response.status === Number('400')) {\r\n              console.log(error.response.data.error)\r\n              setMessage(\r\n                `${error.response.data.error}`\r\n              )\r\n              setTimeout(() => {\r\n                setMessage(null)\r\n              }, 3000)\r\n            }\r\n          })\r\n      }\r\n    } else {\r\n      personService\r\n        .create(personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setMessage(\r\n            `Added ${returnedPerson.name}`\r\n          )\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 3000)\r\n        })\r\n        .catch(error => {\r\n          console.log(error.response.data.error)\r\n          setMessage(\r\n            `${error.response.data.error}`\r\n          )\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 3000)\r\n        })\r\n    }\r\n\r\n    // setNewFilter('')\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    // console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    // console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    // console.log(event.target.value)\r\n    setNewFilter(event.target.value)\r\n    const regex = new RegExp(newFilter, 'gi')\r\n    const filteredPersons = () => persons.filter(person => person.name.match(regex))\r\n    setPersons(filteredPersons)\r\n  }\r\n\r\n  const handleDeletePerson = (name, id) => {\r\n    if (window.confirm(`Delete ${name} ?`)) {\r\n      personService\r\n        .remove(id)\r\n        .then(\r\n          console.log(`${name} deleted`),\r\n          setPersons(persons.filter(person => person.id !== id)),\r\n          setMessage(\r\n            `${name} deleted`\r\n          ),\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 3000)\r\n        )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} />\r\n      <br />\r\n      <Filter value={newFilter} onChange={handleFilterChange} />\r\n      <h3>Add a new</h3>\r\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\r\n      {/*<div>debug: {newName}</div>*/}\r\n      <h3>Numbers</h3>\r\n      <Persons persons={persons} handleDeletePerson={handleDeletePerson} />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n  <App />, \r\n  document.getElementById('root')\r\n)"],"sourceRoot":""}