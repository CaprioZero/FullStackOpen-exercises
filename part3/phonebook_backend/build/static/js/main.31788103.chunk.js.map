{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","persons","handleDeletePerson","map","person","name","number","onClick","id","Notification","message","className","includes","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","setPersons","setNewName","setNewNumber","newFilter","setNewFilter","setMessage","useEffect","personService","initialPersons","console","log","event","target","regex","RegExp","filter","match","preventDefault","personObject","sameName","find","changedNumber","length","window","confirm","updatedPerson","setTimeout","catch","error","returnedPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"oLAUeA,EARA,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SACrB,OACI,0DACsB,uBAAOD,MAAOA,EAAOC,SAAUA,QCe9CC,EAlBI,SAAC,GAA6E,IAA3EC,EAA0E,EAA1EA,UAAWC,EAA+D,EAA/DA,QAASC,EAAsD,EAAtDA,iBAAkBC,EAAoC,EAApCA,UAAWC,EAAyB,EAAzBA,mBACnE,OACI,mCACI,uBAAMC,SAAUL,EAAhB,UACI,yCACU,uBAAOH,MAAOI,EAASH,SAAUI,OAE3C,2CACY,uBAAOL,MAAOM,EAAWL,SAAUM,OAE/C,8BACI,wBAAQE,KAAK,SAAb,yBCGLC,EAdC,SAAC,GAAqC,IAAnCC,EAAkC,EAAlCA,QAASC,EAAyB,EAAzBA,mBACxB,OACI,mCACI,6BACKD,EAAQE,KAAI,SAAAC,GAAM,OACf,+BACKA,EAAOC,KADZ,IACmBD,EAAOE,OAD1B,IACkC,wBAAQC,QAAS,kBAAML,EAAmBE,EAAOC,KAAMD,EAAOI,KAA9D,sBADzBJ,EAAOI,YCOrBC,EAZM,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACpB,OAAgB,OAAZA,EACO,KAIP,qBAAKC,UAAWD,EAAQE,SAAS,WAAa,QAAU,UAAxD,SACKF,K,gBCRPG,EAAU,eAuBD,EArBA,WAEX,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAmB9B,EAhBA,SAAAC,GAEX,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAc9B,EAXA,SAACV,EAAIW,GAElB,OADgBL,IAAMO,IAAN,UAAaR,EAAb,YAAwBL,GAAMW,GAC/BH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAS5B,EANA,SAAAV,GAEX,OADgBM,IAAMQ,OAAN,UAAgBT,EAAhB,YAA2BL,IAC5BQ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SCsG9BK,EAnHH,WACV,MAA8BC,mBAAS,IAAvC,mBAAOvB,EAAP,KAAgBwB,EAAhB,KACA,EAA8BD,mBAAS,IAAvC,mBAAO9B,EAAP,KAAgBgC,EAAhB,KACA,EAAkCF,mBAAS,IAA3C,mBAAO5B,EAAP,KAAkB+B,EAAlB,KACA,EAAkCH,mBAAS,IAA3C,mBAAOI,EAAP,KAAkBC,EAAlB,KACA,EAA8BL,mBAAS,MAAvC,mBAAOd,EAAP,KAAgBoB,EAAhB,KAEAC,qBAAU,WACRC,IAEGhB,MAAK,SAAAiB,GACJC,QAAQC,IAAI,qBACZV,EAAWQ,QAEd,IAsFH,OACE,qCACE,2CACA,cAAC,EAAD,CAAcvB,QAASA,IACvB,uBACA,cAAC,EAAD,CAAQpB,MAAOsC,EAAWrC,SAxBH,SAAC6C,GAE1BP,EAAaO,EAAMC,OAAO/C,OAC1B,IAAMgD,EAAQ,IAAIC,OAAOX,EAAW,MAEpCH,GADwB,kBAAMxB,EAAQuC,QAAO,SAAApC,GAAM,OAAIA,EAAOC,KAAKoC,MAAMH,YAqBvE,2CACA,cAAC,EAAD,CAAY7C,UA3FE,SAAC2C,GACjBA,EAAMM,iBACN,IAAMC,EAAe,CACnBtC,KAAMX,EACNY,OAAQV,GAEJgD,EAAW3C,EAAQ4C,MAAK,SAAAzC,GAAM,OAAIA,EAAOC,OAASX,KAClDoD,EAAa,2BAAQF,GAAR,IAAkBtC,OAAQV,IACzCK,EAAQuC,QAAO,SAAApC,GAAM,OAAIA,EAAOC,OAASX,KAASqD,OAAS,EACzDC,OAAOC,QAAP,UAAkBvD,EAAlB,4EACFsC,EACUY,EAASpC,GAAIsC,GACpB9B,MAAK,SAAAkC,GAEJzB,EAAWxB,EAAQE,KAAI,SAAAC,GAAM,OAAIA,EAAOC,OAASX,EAAUwD,EAAgB9C,MAC3EsB,EAAW,IACXC,EAAa,IACbG,EAAW,GAAD,OACLoB,EAAc7C,KADT,gCACqC6C,EAAc5C,SAE7D6C,YAAW,WACTrB,EAAW,QACV,QAEJsB,OAAM,SAACC,GACNnB,QAAQC,IAAIkB,GACZ5B,EAAWxB,EAAQuC,QAAO,SAAApC,GAAM,OAAIA,EAAOI,KAAOsC,EAActC,OAChEkB,EAAW,IACXC,EAAa,IACbG,EAAW,kBAAD,OACUgB,EAAczC,KADxB,0CAGV8C,YAAW,WACTrB,EAAW,QACV,QAITE,EACUW,GACP3B,MAAK,SAAAsC,GACJ7B,EAAWxB,EAAQsD,OAAOD,IAC1B5B,EAAW,IACXC,EAAa,IACbG,EAAW,SAAD,OACCwB,EAAejD,OAE1B8C,YAAW,WACTrB,EAAW,QACV,SA0C2BpC,QAASA,EAASC,iBApC/B,SAACyC,GAExBV,EAAWU,EAAMC,OAAO/C,QAkCkEM,UAAWA,EAAWC,mBA/BvF,SAACuC,GAE1BT,EAAaS,EAAMC,OAAO/C,UA+BxB,yCACA,cAAC,EAAD,CAASW,QAASA,EAASC,mBArBJ,SAACG,EAAMG,GAC5BwC,OAAOC,QAAP,iBAAyB5C,EAAzB,QACF2B,EACUxB,GACPQ,KACCkB,QAAQC,IAAR,UAAe9B,EAAf,aACAoB,EAAWxB,EAAQuC,QAAO,SAAApC,GAAM,OAAIA,EAAOI,KAAOA,c,MClG5DgD,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.31788103.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({ value, onChange }) => {\r\n    return (\r\n        <>\r\n            filter shown with <input value={value} onChange={onChange} />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react';\r\n\r\nconst PersonForm = ({ addPerson, newName, handleNameChange, newNumber, handleNumberChange }) => {\r\n    return (\r\n        <>\r\n            <form onSubmit={addPerson}>\r\n                <div>\r\n                    name: <input value={newName} onChange={handleNameChange} />\r\n                </div>\r\n                <div>\r\n                    number: <input value={newNumber} onChange={handleNumberChange} />\r\n                </div>\r\n                <div>\r\n                    <button type=\"submit\">add</button>\r\n                </div>\r\n            </form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react';\r\n\r\nconst Persons = ({ persons, handleDeletePerson }) => {\r\n    return (\r\n        <>\r\n            <ul>\r\n                {persons.map(person =>\r\n                    <li key={person.id}>\r\n                        {person.name} {person.number} <button onClick={() => handleDeletePerson(person.name, person.id)}>delete</button>\r\n                    </li>\r\n                )}\r\n            </ul>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className={message.includes('removed') ? 'error' : 'success'}>\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport Notification from './components/Notification'\r\nimport personService from './services/persons'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [newFilter, setNewFilter] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        console.log('promise fulfilled')\r\n        setPersons(initialPersons)\r\n      })\r\n  }, [])\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    const sameName = persons.find(person => person.name === newName)\r\n    const changedNumber = { ...sameName, number: newNumber }\r\n    if (persons.filter(person => person.name === newName).length > 0) {\r\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n        personService\r\n          .update(sameName.id, changedNumber)\r\n          .then(updatedPerson => {\r\n            // console.log(`${updatedPerson.name}'s number updated to ${updatedPerson.number}`)\r\n            setPersons(persons.map(person => person.name === newName ? updatedPerson : person))\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setMessage(\r\n              `${updatedPerson.name}'s number updated to ${updatedPerson.number}`\r\n            )\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 3000)\r\n          })\r\n          .catch((error) => {\r\n            console.log(error)\r\n            setPersons(persons.filter(person => person.id !== changedNumber.id))\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setMessage(\r\n              `Information of ${changedNumber.name} has already been removed from server`\r\n            )\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 3000)\r\n          })\r\n      }\r\n    } else {\r\n      personService\r\n        .create(personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setMessage(\r\n            `Added ${returnedPerson.name}`\r\n          )\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 3000)\r\n        })\r\n    }\r\n    // setNewFilter('')\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    // console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    // console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    // console.log(event.target.value)\r\n    setNewFilter(event.target.value)\r\n    const regex = new RegExp(newFilter, 'gi')\r\n    const filteredPersons = () => persons.filter(person => person.name.match(regex))\r\n    setPersons(filteredPersons)\r\n  }\r\n\r\n  const handleDeletePerson = (name, id) => {\r\n    if (window.confirm(`Delete ${name} ?`)) {\r\n      personService\r\n        .remove(id)\r\n        .then(\r\n          console.log(`${name} deleted`),\r\n          setPersons(persons.filter(person => person.id !== id))\r\n        )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} />\r\n      <br />\r\n      <Filter value={newFilter} onChange={handleFilterChange} />\r\n      <h3>Add a new</h3>\r\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\r\n      {/*<div>debug: {newName}</div>*/}\r\n      <h3>Numbers</h3>\r\n      <Persons persons={persons} handleDeletePerson={handleDeletePerson} />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n  <App />, \r\n  document.getElementById('root')\r\n)"],"sourceRoot":""}